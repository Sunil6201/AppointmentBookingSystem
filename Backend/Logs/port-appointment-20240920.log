2024-09-20 09:48:04.529 +05:30 [INF] User profile is available. Using 'C:\Users\YashKamleshkumarShah\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-20 09:48:04.648 +05:30 [INF] Now listening on: http://localhost:5096
2024-09-20 09:48:04.651 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2024-09-20 09:48:04.653 +05:30 [INF] Hosting environment: Development
2024-09-20 09:48:04.655 +05:30 [INF] Content root path: D:\logging4net appointment system\portappointmentapi
2024-09-20 09:55:19.593 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5096/api/authenticate/login - application/json 111
2024-09-20 09:55:19.647 +05:30 [WRN] Failed to determine the https port for redirect.
2024-09-20 09:55:19.836 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2024 18:02:25', Current time (UTC): '20-09-2024 04:25:19'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-20 09:55:19.857 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2024 18:02:25', Current time (UTC): '20-09-2024 04:25:19'.
2024-09-20 09:55:19.867 +05:30 [INF] Executing endpoint 'PortAppointmentAPI.Controllers.AuthenticateController.Login (PortAppointmentAPI)'
2024-09-20 09:55:19.913 +05:30 [INF] Route matched with {action = "Login", controller = "Authenticate"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(PortAppointmentAPI.Models.UserLogin) on controller PortAppointmentAPI.Controllers.AuthenticateController (PortAppointmentAPI).
2024-09-20 09:55:20.124 +05:30 [INF] Login process started for Username: testuser12345
2024-09-20 09:55:25.190 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Password], [u].[Role], [u].[Username]
FROM [UserLogin] AS [u]
WHERE [u].[Username] = @__model_Username_0
2024-09-20 09:55:25.976 +05:30 [INF] Login completed successfully for Username: testuser12345.
2024-09-20 09:55:25.984 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-20 09:55:26.016 +05:30 [INF] Executed action PortAppointmentAPI.Controllers.AuthenticateController.Login (PortAppointmentAPI) in 6089.7106ms
2024-09-20 09:55:26.022 +05:30 [INF] Executed endpoint 'PortAppointmentAPI.Controllers.AuthenticateController.Login (PortAppointmentAPI)'
2024-09-20 09:55:26.045 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5096/api/authenticate/login - 200 null application/json; charset=utf-8 6455.2277ms
2024-09-20 09:56:18.557 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5096/api/appointment - application/json 111
2024-09-20 09:56:18.623 +05:30 [INF] Executing endpoint 'PortAppointmentAPI.Controllers.AppointmentController.GetAppointments (PortAppointmentAPI)'
2024-09-20 09:56:18.637 +05:30 [INF] Route matched with {action = "GetAppointments", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAppointments() on controller PortAppointmentAPI.Controllers.AppointmentController (PortAppointmentAPI).
2024-09-20 09:56:18.652 +05:30 [INF] GetAppointments called.
2024-09-20 09:56:18.890 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AppointmentDate], [a].[ContainerId], [a].[DriverId], [a].[Port], [a].[ShipId], [a].[TicketNumber], [a].[TruckingCompanyId], [a].[UserId], [d].[Id], [d].[DriverMobileNumber], [d].[LicenseNumber], [d].[VehicleNumber], [t].[Id], [t].[DropType], [t].[Name], [s].[Id], [s].[ShipNumber], [s].[TimeSlot], [c].[Id], [c].[ContainerNumber], [c].[Size], [c].[Type]
FROM [Appointments] AS [a]
INNER JOIN [Driver] AS [d] ON [a].[DriverId] = [d].[Id]
INNER JOIN [TruckingCompany] AS [t] ON [a].[TruckingCompanyId] = [t].[Id]
INNER JOIN [Ship] AS [s] ON [a].[ShipId] = [s].[Id]
INNER JOIN [Container] AS [c] ON [a].[ContainerId] = [c].[Id]
2024-09-20 09:56:19.068 +05:30 [INF] GetAppointments completed successfully with 1 records.
2024-09-20 09:56:19.072 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PortAppointmentAPI.Models.Appointment, PortAppointmentAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-20 09:56:19.136 +05:30 [INF] Executed action PortAppointmentAPI.Controllers.AppointmentController.GetAppointments (PortAppointmentAPI) in 490.5893ms
2024-09-20 09:56:19.141 +05:30 [INF] Executed endpoint 'PortAppointmentAPI.Controllers.AppointmentController.GetAppointments (PortAppointmentAPI)'
2024-09-20 09:56:19.151 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5096/api/appointment - 200 null application/json; charset=utf-8 593.6934ms
2024-09-20 09:56:55.257 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5096/api/appointment/download-logs - application/json 111
2024-09-20 09:56:55.277 +05:30 [INF] Executing endpoint 'PortAppointmentAPI.Controllers.AppointmentController.DownloadLogs (PortAppointmentAPI)'
2024-09-20 09:56:55.284 +05:30 [INF] Route matched with {action = "DownloadLogs", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DownloadLogs() on controller PortAppointmentAPI.Controllers.AppointmentController (PortAppointmentAPI).
2024-09-20 09:56:55.294 +05:30 [INF] DownloadLogs called.
2024-09-20 09:56:55.304 +05:30 [INF] DownloadLogs completed successfully with file: port-appointment-20240920.log.
2024-09-20 09:56:55.312 +05:30 [INF] Executing FileContentResult, sending file with download name 'port-appointment-logs.txt' ...
2024-09-20 09:56:55.340 +05:30 [INF] Executed action PortAppointmentAPI.Controllers.AppointmentController.DownloadLogs (PortAppointmentAPI) in 48.5381ms
2024-09-20 09:56:55.346 +05:30 [INF] Executed endpoint 'PortAppointmentAPI.Controllers.AppointmentController.DownloadLogs (PortAppointmentAPI)'
2024-09-20 09:56:55.353 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5096/api/appointment/download-logs - 200 6361 text/plain 95.0789ms
